{% macro MediaControls(initialMedia = []) %}
<section id="media" class="cms-section" data-cms="media-section" hidden>
  <div class="cms-content">
    <div class="cms-section-heading">
      <h2>Medya Kontrolleri</h2>
      <div class="cms-section-actions">
        <button class="cms-btn cms-btn-primary" data-action="open-media-upload">Dosya Yükle</button>
        <button class="cms-btn cms-btn-secondary" data-action="refresh-media">Yenile</button>
      </div>
    </div>
    <p class="cms-section-subtitle">
      Yüklediğiniz medya dosyalarının bağlantılarını kopyalayarak içeriklerde kullanabilirsiniz.
    </p>

    <input type="file" data-cms="media-upload-input" accept="image/*,video/*,audio/*,.pdf,.doc,.docx" multiple hidden>

    <div class="media-controls" data-cms="media-controls">
      <div class="media-upload-hint">
        <p>Dosyalar proje dizinindeki <code>/public/uploads/media</code> klasörüne kaydedilir.</p>
        <p>Yükleme sonrası dosya URL’si <code>/uploads/media/&lt;dosya-adı&gt;</code> şeklindedir.</p>
      </div>

      <div class="media-list" data-cms="media-list">
        {% if initialMedia | length %}
        <div class="media-grid" data-cms="media-grid">
          {% for media in initialMedia %}
          <article class="media-card" data-media-filename="{{ media.filename }}">
            <div class="media-card__preview" data-media-preview>
              <span>{{ media.extension | upper | default('DOSYA') }}</span>
            </div>
            <div class="media-card__body">
              <header class="media-card__header">
                <span class="media-card__title" title="{{ media.filename }}">{{ media.filename }}</span>
                <div class="media-card__menu">
                  <button class="media-card__menu-btn" data-action="toggle-media-menu" data-media-filename="{{ media.filename }}">⋮</button>
                  <div class="media-card__menu-panel" data-media-menu hidden>
                    <button data-action="view-media" data-media-url="{{ media.url }}">Görüntüle</button>
                    <button data-action="rename-media" data-media-filename="{{ media.filename }}">Yeniden Adlandır</button>
                    <button data-action="copy-media-url" data-media-url="{{ media.url }}">Bağlantıyı Kopyala</button>
                    <button data-action="delete-media" data-media-filename="{{ media.filename }}">Sil</button>
                  </div>
                </div>
              </header>
              <div class="media-card__meta">
                <span>{{ media.size }}</span>
                <span>{{ media.uploadedAt | formatDate | default('-') }}</span>
              </div>
            </div>
          </article>
          {% endfor %}
        </div>
        {% else %}
        <div class="cms-empty-state" data-cms="media-empty">
          Henüz medya yüklenmedi. “Dosya Yükle” butonuyla yeni dosyalar ekleyebilirsiniz.
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>
{% endmacro %}


