{% extends "layouts/base.njk" %}
{% from "widgets/ad-placeholder.njk" import adPlaceholder %}

{% block head_extra %}
<meta name="keywords" content="{{ category.name }}, haber, güncel">
{% endblock %}

{% block body %}
{% set brand = branding or {} %}
<header class="site-header">
  <div class="container header-inner">
    <a class="site-logo" href="/" aria-label="{{ brand.siteName or 'UHA News' }}">
      {% if brand.headerLogo %}
      <img src="{{ brand.headerLogo }}" alt="{{ brand.siteName or 'UHA News' }}">
      {% endif %}
      <span class="site-logo__text"{% if brand.headerLogo %} aria-hidden="true"{% endif %}>{{ brand.siteName or 'UHA News' }}</span>
    </a>
    <nav class="site-nav" aria-label="Ana menü">
      <a class="site-nav__link" href="/">Ana Sayfa</a>
      <a class="site-nav__link" href="/kategori/gundem">Gündem</a>
      <a class="site-nav__link" href="/kategori/ekonomi">Ekonomi</a>
      <a class="site-nav__link" href="/kategori/spor">Spor</a>
    </nav>
  </div>
</header>

<main class="site-main">
  <nav class="breadcrumb container" aria-label="İz yolu">
    <ol class="breadcrumb__list">
      <li class="breadcrumb__item"><a href="/">Ana Sayfa</a></li>
      <li class="breadcrumb__item"><span>{{ category.name }}</span></li>
    </ol>
  </nav>

  <section class="category-hero container">
    <h1 class="category-hero__title">{{ category.name }} Haberleri</h1>
    {% if category.description %}
    <p class="category-hero__description">{{ category.description }}</p>
    {% endif %}
  </section>

  <section class="container">
    <div class="articles-grid">
      {% for article in articles %}
      {% set image = article.images and article.images[0] %}
      <article class="article-card">
        {% if image %}
        <div class="article-card__media">
          <img
            src="{{ image.lowRes }}"
            alt="{{ image.alt }}"
            loading="lazy"
            data-high-res="{{ image.highRes }}"
          >
        </div>
        {% endif %}
        <div class="article-card__body">
          <div class="article-card__meta">
            <span class="badge badge--category">{{ article.category }}</span>
            <span class="badge badge--date">{{ article.publishedAt | formatDate }}</span>
          </div>
          <h4 class="article-card__title"><a href="/haber/{{ article.slug }}">{{ article.title }}</a></h4>
          <p class="article-card__summary">{{ article.summary }}</p>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>

  {% if pagination.totalPages > 1 %}
  <nav class="pagination container" aria-label="Sayfalandırma">
    {% if pagination.hasPrev %}
    <a class="pagination__link" href="?page={{ pagination.prevPage }}">« Önceki</a>
    {% endif %}

    {% for page in pagination.pages %}
      {% if page.isCurrent %}
      <span class="pagination__current">{{ page.number }}</span>
      {% else %}
      <a class="pagination__link" href="?page={{ page.number }}">{{ page.number }}</a>
      {% endif %}
    {% endfor %}

    {% if pagination.hasNext %}
    <a class="pagination__link" href="?page={{ pagination.nextPage }}">Sonraki »</a>
    {% endif %}
  </nav>
  {% endif %}

  <section class="container">
    {{ adPlaceholder('category-mid', 'Reklam Alanı', '728x90') }}
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    {% if brand.footerLogo %}
    <div class="site-footer__logo">
      <img src="{{ brand.footerLogo }}" alt="{{ brand.siteName or 'UHA News' }}">
    </div>
    {% endif %}
    <p>&copy; {{ current_year }} {{ brand.siteName or 'UHA News' }}. Tüm hakları saklıdır.</p>
  </div>
</footer>
{% endblock %}

