{% extends "layouts/base.njk" %}
{% from "widgets/carousel.njk" import carousel %}
{% from "widgets/ad-placeholder.njk" import adPlaceholder %}
{% from "widgets/site-header.njk" import siteHeader %}

{% block body %}
{% set brand = branding or {} %}
{{ siteHeader(brand, navCategories or []) }}

<main class="site-main">
  <section class="hero container">
    <h2 class="hero__title">Son Dakika Haberleri</h2>
    {{ carousel('home-hero', featuredArticles) }}
  </section>

  <section class="featured-articles container">
    <h3 class="section-title">Öne Çıkan Haberler</h3>
    <div class="articles-grid">
      {% for article in featuredArticles %}
      {% set image = article.images and article.images[0] %}
      <article class="article-card">
        {% if image %}
        <div class="article-card__media">
          <img
            src="{{ image.lowRes }}"
            alt="{{ image.alt }}"
            width="{{ image.width }}"
            height="{{ image.height }}"
            loading="lazy"
            data-high-res="{{ image.highRes }}"
          >
        </div>
        {% endif %}
        <div class="article-card__body">
          <h4 class="article-card__title"><a href="/haber/{{ article.slug }}">{{ article.title }}</a></h4>
          <p class="article-card__summary">{{ article.summary }}</p>
          <div class="article-card__meta">
            <span class="badge badge--category">{{ article.category }}</span>
            <span class="badge badge--date">{{ article.publishedAt | formatDate }}</span>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>

  {% for section in categorySections %}
  <section class="category-section container">
    <div class="category-section__header">
      <h3 class="section-title"><a href="/kategori/{{ section.slug }}">{{ section.name }}</a></h3>
    </div>
    <div class="articles-list">
      {% for article in section.articles %}
      {% set image = article.images and article.images[0] %}
      <article class="article-item">
        {% if image %}
        <div class="article-item__media">
          <img
            src="{{ image.lowRes }}"
            alt="{{ image.alt }}"
            loading="lazy"
            data-high-res="{{ image.highRes }}"
          >
        </div>
        {% endif %}
        <div class="article-item__body">
          <h4 class="article-item__title"><a href="/haber/{{ article.slug }}">{{ article.title }}</a></h4>
          <p class="article-item__summary">{{ article.summary }}</p>
          <span class="badge badge--date">{{ article.publishedAt | formatDate }}</span>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>
  {% endfor %}

  <section class="container">
    {{ adPlaceholder('home-mid', 'Reklam Alanı', '728x90') }}
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    {% if brand.footerLogo %}
    <div class="site-footer__logo">
      <img src="{{ brand.footerLogo }}" alt="{{ brand.siteName or 'UHA News' }}">
    </div>
    {% endif %}
    <p>&copy; {{ current_year }} {{ brand.siteName or 'UHA News' }}. Tüm hakları saklıdır.</p>
  </div>
</footer>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="/js/carousel.js" defer></script>
{% endblock %}

