{% extends "layouts/base.njk" %}
{% from "widgets/carousel.njk" import carousel %}
{% from "widgets/ad-placeholder.njk" import adPlaceholder %}
{% from "widgets/site-header.njk" import siteHeader %}
{% from "widgets/flashNews.njk" import flashNews %}
{% from "widgets/news-card.njk" import newsCard %}
{% from "widgets/footer.njk" import siteFooter %}

{% block body %}
{% set brand = branding or {} %}
{{ siteHeader(brand, navCategories or []) }}

{# Flash News Ticker #}
{% if flashNewsItems and flashNewsItems | length %}
<div class="container">
  {{ flashNews('homepage-flash', flashNewsItems) }}
</div>
{% endif %}

<main class="site-main">
  <section class="hero-title container">
    <h2 class="hero__title">Son Dakika Haberleri</h2>
  </section>
  
  <section class="hero-carousel">
    {% if featuredArticles and featuredArticles | length %}
    {{ carousel('home-hero', featuredArticles) }}
    {% else %}
    <div class="container">
      <p>Şu anda öne çıkan haber bulunmuyor.</p>
    </div>
    {% endif %}
  </section>

  <section class="featured-articles container">
    <div class="section-header">
      <h3 class="section-title">Öne Çıkan Haberler</h3>
    </div>
    {% if featuredArticles and featuredArticles | length %}
    <div class="news-grid">
      {% for article in featuredArticles %}
      {{ newsCard(article, 'default') }}
      {% endfor %}
    </div>
    {% else %}
    <p>Yeni haberler eklenene kadar bu alan boş.</p>
    {% endif %}
  </section>

  {% if categorySections and categorySections | length %}
  {% for section in categorySections %}
  <section class="category-section container">
    <div class="section-header">
      <h3 class="section-title"><a href="{{ asset('kategori/' ~ section.slug) }}">{{ section.name }}</a></h3>
      <a href="{{ asset('kategori/' ~ section.slug) }}" class="view-all-link">Tümünü Gör →</a>
    </div>
    <div class="news-grid">
      {% for article in section.articles %}
      {{ newsCard(article, 'compact') }}
      {% endfor %}
    </div>
  </section>
  {% endfor %}
  {% else %}
  <section class="category-section container">
    <p>Şu anda görüntülenecek kategori haberleri bulunmuyor.</p>
  </section>
  {% endif %}

  <section class="container">
    {{ adPlaceholder('home-mid', 'Reklam Alanı', '728x90') }}
  </section>
</main>

{{ siteFooter(brand, navCategories or []) }}
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ asset('js/carousel.js') }}" defer></script>
{% endblock %}

