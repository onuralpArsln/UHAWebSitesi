{% extends "layouts/base.njk" %}
{% from "widgets/ad-placeholder.njk" import adPlaceholder %}

{% block body %}
{% set brand = branding or {} %}
<header class="site-header">
  <div class="container header-inner">
    <a class="site-logo" href="/" aria-label="{{ brand.siteName or 'UHA News' }}">
      {% if brand.headerLogo %}
      <img src="{{ brand.headerLogo }}" alt="{{ brand.siteName or 'UHA News' }}">
      {% endif %}
      <span class="site-logo__text"{% if brand.headerLogo %} aria-hidden="true"{% endif %}>{{ brand.siteName or 'UHA News' }}</span>
    </a>
    <nav class="site-nav" aria-label="Ana menü">
      <a class="site-nav__link" href="/">Ana Sayfa</a>
      <a class="site-nav__link" href="/kategori/gundem">Gündem</a>
      <a class="site-nav__link" href="/kategori/ekonomi">Ekonomi</a>
      <a class="site-nav__link" href="/kategori/spor">Spor</a>
    </nav>
  </div>
</header>

<main class="site-main">
  <section class="search-hero container">
    <h1 class="section-title">"{{ searchQuery }}" Arama Sonuçları</h1>
    <p class="search-hero__subtitle">{{ articles | length }} sonuç bulundu</p>
  </section>

  <section class="container article-supplement">
    {{ adPlaceholder('search-top', 'Reklam Alanı', '728x90') }}
  </section>

  {% if articles and articles | length %}
  <section class="container">
    <div class="search-results">
      {% for article in articles %}
      {% set image = article.images and article.images[0] %}
      <article class="search-result">
        {% if image %}
        <div class="search-result__media">
          <img
            src="{{ image.lowRes }}"
            alt="{{ image.alt }}"
            data-high-res="{{ image.highRes }}"
            loading="lazy"
          >
        </div>
        {% endif %}
        <div class="search-result__content">
          <div class="search-result__meta">
            <span class="badge badge--category">{{ article.category }}</span>
            <span class="badge badge--date">{{ article.publishedAt | formatDate }}</span>
          </div>
          <h2 class="search-result__title"><a href="/haber/{{ article.slug }}">{{ article.title }}</a></h2>
          <p class="search-result__summary">{{ article.summary }}</p>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>
  {% else %}
  <section class="container">
    <div class="search-empty">
      <p>Aradığınız kriterlere uygun sonuç bulunamadı.</p>
    </div>
  </section>
  {% endif %}

  {% if pagination and pagination.totalPages and pagination.totalPages > 1 %}
  <nav class="pagination container" aria-label="Sayfalandırma">
    {% if pagination.hasPrev %}
    <a class="pagination__link" href="?q={{ searchQuery | urlencode }}&page={{ pagination.prevPage }}">« Önceki</a>
    {% endif %}

    {% for page in pagination.pages %}
      {% if page.isCurrent %}
      <span class="pagination__current">{{ page.number }}</span>
      {% else %}
      <a class="pagination__link" href="?q={{ searchQuery | urlencode }}&page={{ page.number }}">{{ page.number }}</a>
      {% endif %}
    {% endfor %}

    {% if pagination.hasNext %}
    <a class="pagination__link" href="?q={{ searchQuery | urlencode }}&page={{ pagination.nextPage }}">Sonraki »</a>
    {% endif %}
  </nav>
  {% endif %}

  <section class="container article-supplement">
    {{ adPlaceholder('search-bottom', 'Reklam Alanı', '728x90') }}
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    {% if brand.footerLogo %}
    <div class="site-footer__logo">
      <img src="{{ brand.footerLogo }}" alt="{{ brand.siteName or 'UHA News' }}">
    </div>
    {% endif %}
    <p>&copy; {{ current_year }} {{ brand.siteName or 'UHA News' }}. Tüm hakları saklıdır.</p>
  </div>
</footer>
{% endblock %}

